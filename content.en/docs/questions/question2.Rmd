# What student information helps predict success in their courses?
Success in course can find in the course_enrollments data set and be defined as C or better score in their official grade.

In a narrow sense, the student information can be obtained from student_details data set, which include information like student_id_number, ACT_score, hs_gpa_entry, and hardship_score.
Based on those definition, I connect those two data sets via student_id_number, conduct logistic regression. 

More broadly, student information can include more information like courses they take, academic plan, college, their instructors, etc. In that sense, I connect student_details, acad_plan, class_instrutors, and course_enrollments data sets. Then I run the logistic regression with more independent variables.



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, comment='', warning = FALSE)
```


## Set up and load data
```{r include=FALSE}
rm(list =ls())
library(pacman)
p_load(tidyverse, broom, ggplot2, kableExtra, mice, interactions)
load("D:/R/data analysis/Institutional research/technical-exercise/content.en/docs/questions/data_230214_1659.Rdata")
```


## Logistic regression
### Basic Model

```{r warning=FALSE}
DF1 <- student_details %>%
  full_join(course_enrollments, by="student_id_number") %>%
  select(c("student_id_number","ACT_score","hs_gpa_entry","hardship_score","success"))
```
```{r include=FALSE}
temp <- mice(DF1, meth = "pmm", m = 10, maxit = 12, seed = 1804)
summary(temp)
DF1 <- complete(temp)
```
```{r}
formula <- as.formula(success~ ACT_score+ hs_gpa_entry+ hardship_score)
lr <- glm(formula, data = DF1, family = binomial(link = "logit"))
```

1. calculate odds ratio

Odds ratio estimates the change in the odd of membership in the target group for one unit increase in the predictor.
```{r warning=FALSE}
broom::tidy(lr, exp = TRUE) %>%
  kable() %>% 
  kable_styling("basic", bootstrap_options = "striped", full_width = F, position = "left")
```


2. Plot the dependent variable and key independent variables
+ ACT_score

+ hs_gpa_entry

+hardship_score





### Add Interactions
1. Evaluate interactions
+ ACT_score*hardship_score
```{r warning= FALSE}
formulaAH <- as.formula(success~ ACT_score+ hs_gpa_entry+ hardship_score + ACT_score*hardship_score)
lrAH <- glm(formulaAH, data = DF1, family = binomial(link = "logit"))
sim_slopes(lrAH, pred = ACT_score, modx = hardship_score, johnson_neyman = TRUE, jnplot = TRUE)
```
+ hs_gpa_entry*hardship_score
```{r warning=FALSE}
formulaHH <- as.formula(success~ ACT_score+ hs_gpa_entry+ hardship_score + hs_gpa_entry*hardship_score)
lrHH <- glm(formulaHH, data = DF1, family = binomial(link = "logit"))
sim_slopes(lrHH, pred = hs_gpa_entry, modx = hardship_score, johnson_neyman = TRUE, jnplot = TRUE)
```


2. Run model
```{r}
formulaFull<- as.formula(success~ ACT_score+ hs_gpa_entry+ hardship_score + ACT_score*hardship_score + hs_gpa_entry*hardship_score)
lrFull <- glm(formulaFull, data = DF1, family = binomial(link = "logit"))
```

Odds ratio estimates the change in the odd of membership in the target group for one unit increase in the predictor.
```{r warning=FALSE}
broom::tidy(lrFull, exp = TRUE) %>%
  kable() %>% 
  kable_styling("basic", bootstrap_options = "striped", full_width = F, position = "left")
```
### Compare two models
To choose from those two models, I compare several criteria of them. One is AIC, which is… ; Another is pesudo-R square, which measures….
+ AIC
```{r}
glance(lr)
glance(lrFull)
```
+ Pseudo R-Square
```{r}
DescTools::PseudoR2(lr, which =  "all")
DescTools::PseudoR2(lrFull, which =  "all")
```




## Conclusion

